<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Regession analysis report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="regression_transparency_files/libs/clipboard/clipboard.min.js"></script>
<script src="regression_transparency_files/libs/quarto-html/quarto.js"></script>
<script src="regression_transparency_files/libs/quarto-html/popper.min.js"></script>
<script src="regression_transparency_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="regression_transparency_files/libs/quarto-html/anchor.min.js"></script>
<link href="regression_transparency_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="regression_transparency_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="regression_transparency_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="regression_transparency_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="regression_transparency_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#joint-groups-t-maj-t-min-vs-c-maj-c-min" id="toc-joint-groups-t-maj-t-min-vs-c-maj-c-min" class="nav-link active" data-scroll-target="#joint-groups-t-maj-t-min-vs-c-maj-c-min"><span class="header-section-number">1</span> Joint groups (T-Maj + T-Min vs C-Maj + C-Min)</a>
  <ul class="collapse">
  <li><a href="#event-study-design-unsaturated-model" id="toc-event-study-design-unsaturated-model" class="nav-link" data-scroll-target="#event-study-design-unsaturated-model"><span class="header-section-number">1.1</span> Event Study design (unsaturated model)</a></li>
  <li><a href="#event-study-design-with-fixed-effects" id="toc-event-study-design-with-fixed-effects" class="nav-link" data-scroll-target="#event-study-design-with-fixed-effects"><span class="header-section-number">1.2</span> Event Study design (with fixed effects)</a></li>
  <li><a href="#event-study-design-assets-weighted-unsaturated-model" id="toc-event-study-design-assets-weighted-unsaturated-model" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-unsaturated-model"><span class="header-section-number">1.3</span> Event Study design assets weighted (unsaturated model)</a></li>
  <li><a href="#event-study-design-assets-weighted-with-fixed-effects" id="toc-event-study-design-assets-weighted-with-fixed-effects" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-with-fixed-effects"><span class="header-section-number">1.4</span> Event Study design assets weighted (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-unsaturated-model" id="toc-diff-in-diff-design-unsaturated-model" class="nav-link" data-scroll-target="#diff-in-diff-design-unsaturated-model"><span class="header-section-number">1.5</span> Diff-in-diff design (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-with-fixed-effects" id="toc-diff-in-diff-design-with-fixed-effects" class="nav-link" data-scroll-target="#diff-in-diff-design-with-fixed-effects"><span class="header-section-number">1.6</span> Diff-in-diff design (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-unsaturated-model" id="toc-diff-in-diff-design-assets-weighted-unsaturated-model" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-unsaturated-model"><span class="header-section-number">1.7</span> Diff-in-diff design assets weighted (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-with-fixed-effects" id="toc-diff-in-diff-design-assets-weighted-with-fixed-effects" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-with-fixed-effects"><span class="header-section-number">1.8</span> Diff-in-diff design assets weighted (with fixed effects)</a></li>
  </ul></li>
  <li><a href="#major-groups-t-maj-vs-c-maj" id="toc-major-groups-t-maj-vs-c-maj" class="nav-link" data-scroll-target="#major-groups-t-maj-vs-c-maj"><span class="header-section-number">2</span> Major groups (T-Maj vs C-Maj)</a>
  <ul class="collapse">
  <li><a href="#event-study-design-unsaturated-model-1" id="toc-event-study-design-unsaturated-model-1" class="nav-link" data-scroll-target="#event-study-design-unsaturated-model-1"><span class="header-section-number">2.1</span> Event Study design (unsaturated model)</a></li>
  <li><a href="#event-study-design-with-fixed-effects-1" id="toc-event-study-design-with-fixed-effects-1" class="nav-link" data-scroll-target="#event-study-design-with-fixed-effects-1"><span class="header-section-number">2.2</span> Event Study design (with fixed effects)</a></li>
  <li><a href="#event-study-design-assets-weighted-unsaturated-model-1" id="toc-event-study-design-assets-weighted-unsaturated-model-1" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-unsaturated-model-1"><span class="header-section-number">2.3</span> Event Study design assets weighted (unsaturated model)</a></li>
  <li><a href="#event-study-design-assets-weighted-with-fixed-effects-1" id="toc-event-study-design-assets-weighted-with-fixed-effects-1" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-with-fixed-effects-1"><span class="header-section-number">2.4</span> Event Study design assets weighted (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-unsaturated-model-1" id="toc-diff-in-diff-design-unsaturated-model-1" class="nav-link" data-scroll-target="#diff-in-diff-design-unsaturated-model-1"><span class="header-section-number">2.5</span> Diff-in-diff design (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-with-fixed-effects-1" id="toc-diff-in-diff-design-with-fixed-effects-1" class="nav-link" data-scroll-target="#diff-in-diff-design-with-fixed-effects-1"><span class="header-section-number">2.6</span> Diff-in-diff design (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-unsaturated-model-1" id="toc-diff-in-diff-design-assets-weighted-unsaturated-model-1" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-unsaturated-model-1"><span class="header-section-number">2.7</span> Diff-in-diff design assets weighted (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-with-fixed-effects-1" id="toc-diff-in-diff-design-assets-weighted-with-fixed-effects-1" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-with-fixed-effects-1"><span class="header-section-number">2.8</span> Diff-in-diff design assets weighted (with fixed effects)</a></li>
  </ul></li>
  <li><a href="#minor-groups-t-min-vs-c-min" id="toc-minor-groups-t-min-vs-c-min" class="nav-link" data-scroll-target="#minor-groups-t-min-vs-c-min"><span class="header-section-number">3</span> Minor groups (T-Min vs C-Min)</a>
  <ul class="collapse">
  <li><a href="#event-study-design-unsaturated-model-2" id="toc-event-study-design-unsaturated-model-2" class="nav-link" data-scroll-target="#event-study-design-unsaturated-model-2"><span class="header-section-number">3.1</span> Event Study design (unsaturated model)</a></li>
  <li><a href="#event-study-design-with-fixed-effects-2" id="toc-event-study-design-with-fixed-effects-2" class="nav-link" data-scroll-target="#event-study-design-with-fixed-effects-2"><span class="header-section-number">3.2</span> Event Study design (with fixed effects)</a></li>
  <li><a href="#event-study-design-assets-weighted-unsaturated-model-2" id="toc-event-study-design-assets-weighted-unsaturated-model-2" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-unsaturated-model-2"><span class="header-section-number">3.3</span> Event Study design assets weighted (unsaturated model)</a></li>
  <li><a href="#event-study-design-assets-weighted-with-fixed-effects-2" id="toc-event-study-design-assets-weighted-with-fixed-effects-2" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-with-fixed-effects-2"><span class="header-section-number">3.4</span> Event Study design assets weighted (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-unsaturated-model-2" id="toc-diff-in-diff-design-unsaturated-model-2" class="nav-link" data-scroll-target="#diff-in-diff-design-unsaturated-model-2"><span class="header-section-number">3.5</span> Diff-in-diff design (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-with-fixed-effects-2" id="toc-diff-in-diff-design-with-fixed-effects-2" class="nav-link" data-scroll-target="#diff-in-diff-design-with-fixed-effects-2"><span class="header-section-number">3.6</span> Diff-in-diff design (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-unsaturated-model-2" id="toc-diff-in-diff-design-assets-weighted-unsaturated-model-2" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-unsaturated-model-2"><span class="header-section-number">3.7</span> Diff-in-diff design assets weighted (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-with-fixed-effects-2" id="toc-diff-in-diff-design-assets-weighted-with-fixed-effects-2" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-with-fixed-effects-2"><span class="header-section-number">3.8</span> Diff-in-diff design assets weighted (with fixed effects)</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Regession analysis report</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Libraries:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fixest)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"global.R"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>populations <span class="ot">&lt;-</span> <span class="fu">str_split</span>(params<span class="sc">$</span>populations, <span class="at">pattern =</span> <span class="st">","</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="joint-groups-t-maj-t-min-vs-c-maj-c-min" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Joint groups (T-Maj + T-Min vs C-Maj + C-Min)</h1>
<section id="event-study-design-unsaturated-model" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="event-study-design-unsaturated-model"><span class="header-section-number">1.1</span> Event Study design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
==========================================================================================================================
                                           All firms                  CIT &gt;= Statutory           CIT &gt; 0                  
--------------------------------------------------------------------------------------------------------------------------
(Intercept)                                            -13847971.94                28775063.67                10871440.62 
                                                       (26298298.98)              (48529809.59)              (27154896.30)
anio_fiscal                                                 6898.35                  -14237.14                   -5367.39 
                                                          (13048.20)                 (24065.55)                 (13466.22)
treatment                                                 -35369.68                 -101472.69                  -55483.51 
                                                          (27935.71)                 (66627.42)                 (37942.68)
i(anio_fiscal, treatment, ref = 2014)2013                   3874.15                  -14237.14                   -1579.40 
                                                          (13902.59)                 (24065.55)                 (17667.14)
i(anio_fiscal, treatment, ref = 2014)2015                6634972.07                   65931.44                 8572568.16 
                                                        (6170343.00)                 (53081.41)               (8474095.63)
i(anio_fiscal, treatment, ref = 2014)2016               52130136.68                  113632.68                80853340.88 
                                                       (40758958.27)                 (95032.47)              (63705111.01)
i(anio_fiscal, treatment, ref = 2014)2017                 101748.69                   43883.99                   11023.85 
                                                         (108065.89)                 (72206.09)                 (40855.32)
i(anio_fiscal, treatment, ref = 2014)2018               69567874.92                78720491.92                73097138.37 
                                                       (53650415.41)              (78258786.87)              (72705705.19)
i(anio_fiscal, treatment, ref = 2014)2019                3431682.76                  324168.62                  188032.99 
                                                        (3361874.62)                (230371.88)                (145877.26)
--------------------------------------------------------------------------------------------------------------------------
r.squared                                                      0.01                       0.01                       0.01 
adj.r.squared                                                  0.01                       0.01                       0.01 
sigma                                                  109124024.72               123599117.81               127477767.87 
statistic                                                     19.60                       7.81                      15.11 
p.value                                                        0.00                       0.00                       0.00 
df                                                             8                          8                          8    
logLik                                                   -486113.06                 -198224.55                 -330652.07 
AIC                                                       972246.12                  396469.11                  661324.14 
BIC                                                       972327.14                  396541.09                  661401.23 
deviance                                   290389774849474396160      150888379984543973386      267419565909013168128    
df.residual                                                24386                       9877                      16456    
nobs                                                       24395                       9886                      16465    
==========================================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>es_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">formula =</span> fml_event_study)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-with-fixed-effects" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="event-study-design-with-fixed-effects"><span class="header-section-number">1.2</span> Event Study design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
==========================================================================================================================
                                           All firms                  CIT &gt;= Statutory           CIT &gt; 0                  
--------------------------------------------------------------------------------------------------------------------------
anio_fiscal2014                                           -79252.51                 -218235.02                 -114952.25 
                                                          (78270.84)                (286038.18)                (114835.36)
anio_fiscal2015                                           -74371.25                 -230807.76                 -116545.00 
                                                          (79606.26)                (284228.74)                (121554.21)
anio_fiscal2016                                           -85243.37                 -198402.40                 -123681.49 
                                                          (80753.41)                (241992.38)                (125824.11)
anio_fiscal2017                                           -21300.12                 -226150.74                  -87490.73 
                                                         (108683.48)                (345206.55)                (162393.45)
anio_fiscal2018                                           -71728.76                 -198855.90                 -182185.48 
                                                          (97131.68)                (248878.18)                (142314.22)
anio_fiscal2019                                            11202.96                  -95012.02                  -91212.85 
                                                         (111610.83)                (260476.61)                (150983.33)
i(anio_fiscal, treatment, ref = 2014)2013               -1383323.71                -2853393.71                -2763687.33 
                                                        (1115768.43)               (7470681.91)               (2275236.54)
i(anio_fiscal, treatment, ref = 2014)2015               12331938.92                48616068.45                15391997.55 
                                                        (8266350.50)              (48482411.03)              (10680387.83)
i(anio_fiscal, treatment, ref = 2014)2016               62282386.63                26256177.95                96567600.65 
                                                       (44321188.06)              (26503649.48)              (72211961.04)
i(anio_fiscal, treatment, ref = 2014)2017               23928443.83                62685320.64                30464202.24 
                                                       (20424042.60)              (62521499.11)              (28693397.03)
i(anio_fiscal, treatment, ref = 2014)2018               85122404.76               133516573.36                91595731.17 
                                                       (66827437.42)             (132523699.52)              (92076634.19)
i(anio_fiscal, treatment, ref = 2014)2019               28528729.82                65986256.25                29693083.16 
                                                       (23632031.26)              (65667913.70)              (32953883.96)
--------------------------------------------------------------------------------------------------------------------------
r.squared                                                      0.01                       0.01                       0.01 
adj.r.squared                                                 -0.24                      -0.61                      -0.34 
statistic                                                      9.20                       5.24                       6.62 
p.value                                                        0.00                       0.00                       0.00 
deviance                                   232965080272343597066      112726168328263794698      213508050763253481482    
df.residual                                                19492                       6090                      12180    
nobs                                                       24395                       9886                      16465    
==========================================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>es_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml_event_study,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_fe,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-unsaturated-model" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="event-study-design-assets-weighted-unsaturated-model"><span class="header-section-number">1.3</span> Event Study design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===========================================================================
                             All firms      CIT &gt;= Statutory  CIT &gt; 0      
---------------------------------------------------------------------------
(Intercept)                  -17446187.81    32567703.57       11875494.54 
                             (31592530.92)  (56047384.92)     (31798353.17)
anio_fiscal                       8688.77      -16112.16          -5861.15 
                                (15675.36)     (27793.20)        (15769.13)
treatment                       -42146.72     -117815.82         -64340.60 
                                (32988.24)     (78052.93)        (44450.02)
anio_fiscal::2013:treatment       5105.57      -16112.16          -2456.87 
                                (16588.51)     (27793.20)        (19909.17)
anio_fiscal::2015:treatment    6326005.26       73292.31        8101461.21 
                              (5867863.21)     (59844.11)      (8002303.04)
anio_fiscal::2016:treatment   57466555.72      124623.35       87698001.35 
                             (44307630.18)    (104800.96)     (68058801.94)
anio_fiscal::2017:treatment      96884.89       49475.13          11720.57 
                               (109544.73)     (83387.34)        (47798.64)
anio_fiscal::2018:treatment   66781990.01    72266801.85       67677315.30 
                             (51198275.15)  (71803596.22)     (67292395.68)
anio_fiscal::2019:treatment    3391548.23      317652.24         183653.08 
                              (3334491.42)    (225611.47)       (143825.73)
---------------------------------------------------------------------------
r.squared                            0.01           0.01              0.01 
adj.r.squared                        0.01           0.00              0.01 
sigma                        421224366.84   463068969.42      492458337.50 
logLik                         -486113.45     -198224.77        -330652.46 
AIC                             972244.91      396467.54         661322.93 
BIC                             972317.83      396532.32         661392.31 
nobs                             24395           9886             16465    
===========================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>es_model_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fml =</span> fml_event_study,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-with-fixed-effects" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="event-study-design-assets-weighted-with-fixed-effects"><span class="header-section-number">1.4</span> Event Study design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===========================================================================
                             All firms      CIT &gt;= Statutory  CIT &gt; 0      
---------------------------------------------------------------------------
anio_fiscal::2013:treatment   -1338868.18     -2304694.88      -2936253.86 
                              (1064372.87)    (6734818.00)     (2332969.72)
anio_fiscal::2015:treatment   12253436.94     44480808.11      15317660.46 
                              (7944601.22)   (44400937.12)    (10243927.54)
anio_fiscal::2016:treatment   67667609.28     23911159.54     103617926.55 
                             (48036886.79)   (24190951.89)    (76914402.68)
anio_fiscal::2017:treatment   22679595.93     57023036.99      28309894.65 
                             (19245878.14)   (56946377.64)    (26307597.19)
anio_fiscal::2018:treatment   80884290.77    121022060.58      84139117.78 
                             (63234580.07)  (120186601.94)    (84392583.85)
anio_fiscal::2019:treatment   26640129.20     59590052.85      26540313.89 
                             (22066188.09)   (59403284.20)    (29877164.40)
---------------------------------------------------------------------------
r.squared                            0.20            0.26             0.20 
adj.r.squared                       -0.00           -0.21            -0.08 
sigma                        422821045.02    509833989.31     512552217.14 
logLik                         -483426.11      -196783.74       -328799.18 
AIC                             976658.23       401159.47        666168.37 
BIC                            1016382.99       428486.40        699201.40 
nobs                             24395            9886            16465    
within.r.squared                     0.01            0.01             0.01 
===========================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  fml_event_study_fe <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  i(anio_fiscal,treatment, ref = 2014) | firm_id + anio_fiscal'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>es_model_aw_fe <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fml =</span> fml_event_study_fe,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw_fe,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-unsaturated-model" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="diff-in-diff-design-unsaturated-model"><span class="header-section-number">1.5</span> Diff-in-diff design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===================================================================================================
                    All firms                  CIT &gt;= Statutory           CIT &gt; 0                  
---------------------------------------------------------------------------------------------------
(Intercept)                         60972.44                  138387.75                   79069.17 
                                   (37533.47)                 (93022.13)                 (50065.45)
treatment                          -52535.24                 -138387.75                  -71233.55 
                                   (38093.77)                 (93022.13)                 (50378.30)
postPost                            -6048.69                  -87728.75                  -39449.88 
                                   (42552.93)                 (96026.77)                 (51159.09)
treatment:postPost               26762802.57                18669632.57                32524533.99 
                                (14529007.08)              (18466133.67)              (20575878.50)
---------------------------------------------------------------------------------------------------
r.squared                               0.00                       0.00                       0.00 
adj.r.squared                           0.00                       0.00                       0.00 
sigma                           109305540.04               123870971.23               127725748.10 
statistic                              23.44                       4.63                      17.20 
p.value                                 0.00                       0.00                       0.00 
df                                      3                          3                          3    
logLik                            -486156.10                 -198248.77                 -330686.57 
AIC                                972322.21                  396507.55                  661383.13 
BIC                                972362.72                  396543.54                  661421.68 
deviance            291416377123313123328      151629581063888961546      268542560198621954048    
df.residual                         24391                       9882                      16461    
nobs                                24395                       9886                      16465    
===================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>did_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">formula =</span> fml)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-with-fixed-effects" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="diff-in-diff-design-with-fixed-effects"><span class="header-section-number">1.6</span> Diff-in-diff design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===================================================================================================
                    All firms                  CIT &gt;= Statutory           CIT &gt; 0                  
---------------------------------------------------------------------------------------------------
postPost                           -14599.32                  -84528.38                  -56159.03 
                                   (48138.49)                (122701.47)                 (72555.55)
treatment:postPost               41755866.31                66796481.49                52231217.81 
                                (23901451.15)              (66248959.06)              (34209829.56)
---------------------------------------------------------------------------------------------------
r.squared                               0.00                       0.00                       0.00 
adj.r.squared                          -0.25                      -0.61                      -0.35 
statistic                              19.54                      11.06                      14.18 
p.value                                 0.00                       0.00                       0.00 
deviance            233815435497420521482      113477741906080514058      214401559868770680842    
df.residual                         19502                       6100                      12190    
nobs                                24395                       9886                      16465    
===================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>did_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-unsaturated-model" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-unsaturated-model"><span class="header-section-number">1.7</span> Diff-in-diff design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span> <span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
======================================================================================================
                    All firms                   CIT &gt;= Statutory            CIT &gt; 0                   
------------------------------------------------------------------------------------------------------
(Intercept)                          70928.50                   160191.36                    91171.69 
                                    (44597.19)                 (109490.39)                  (58861.14)
treatment                           -61851.61                  -160191.36                   -82756.03 
                                    (45129.79)                 (109490.39)                  (59163.50)
postPost                             -4686.28                  -100218.77                   -44394.79 
                                    (51316.95)                 (113472.57)                  (60756.59)
treatment:postPost                27255530.22                 17163772.92                 32800924.15 
                                 (14547359.96)               (16948365.60)               (20290386.15)
------------------------------------------------------------------------------------------------------
r.squared                                0.00                        0.00                        0.00 
adj.r.squared                            0.00                        0.00                        0.00 
sigma                            421938719.47                463993959.77                493477065.36 
statistic                               24.04                        4.21                       17.55 
p.value                                  0.00                        0.01                        0.00 
df                                       3                           3                           3    
logLik                             -487471.06                  -198335.14                  -331453.37 
AIC                                 974952.13                   396680.28                   662916.74 
BIC                                 974992.64                   396716.27                   662955.29 
deviance            4342385414304815906886      2127499680414665539624      4008576366657031110826    
df.residual                          24391                        9882                       16461    
nobs                                 24395                        9886                       16465    
======================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>did_model_aw <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">formula =</span> fml,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">weights =</span> assets_2014)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-with-fixed-effects" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-with-fixed-effects"><span class="header-section-number">1.8</span> Diff-in-diff design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
==================================================================
                    All firms      CIT &gt;= Statutory  CIT &gt; 0      
------------------------------------------------------------------
treatment:postPost   41869062.92    60644657.55       51878610.21 
                    (23301988.72)  (60181705.23)     (32808251.23)
------------------------------------------------------------------
r.squared                   0.20           0.25              0.20 
adj.r.squared              -0.00          -0.21             -0.08 
sigma               423479632.99   510980455.60      513508484.07 
logLik                -483466.67     -196812.76        -328830.47 
AIC                    976729.33      401207.51         666220.94 
BIC                   1016413.58      428498.45         699215.42 
nobs                    24395           9886             16465    
within.r.squared            0.00           0.00              0.00 
==================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-8-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>did_model_fe_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fml =</span> fml_fe,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="major-groups-t-maj-vs-c-maj" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Major groups (T-Maj vs C-Maj)</h1>
<section id="event-study-design-unsaturated-model-1" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="event-study-design-unsaturated-model-1"><span class="header-section-number">2.1</span> Event Study design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-3" role="tab" aria-controls="tabset-9-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
==========================================================================================================================
                                           All firms                  CIT &gt;= Statutory           CIT &gt; 0                  
--------------------------------------------------------------------------------------------------------------------------
(Intercept)                                            -42265031.02               -28661259.07               -22021611.50 
                                                       (25363552.17)              (25130595.55)              (15689452.19)
anio_fiscal                                                20993.23                   14246.58                   10945.21 
                                                          (12591.43)                 (12472.56)                  (7786.81)
treatment                                                  -6931.05                  -31346.92                  -10196.88 
                                                          (14357.14)                 (24996.80)                 (20214.74)
i(anio_fiscal, treatment, ref = 2014)2013                  12680.19                   14246.58                    -768.79 
                                                          (15118.82)                 (12472.46)                 (14131.55)
i(anio_fiscal, treatment, ref = 2014)2015               13503105.50                  105149.65                19057009.13 
                                                       (12527382.58)                (117536.70)              (18800551.33)
i(anio_fiscal, treatment, ref = 2014)2016               22986478.58                  140275.55                38773258.59 
                                                       (21999957.41)                (167696.23)              (38471520.96)
i(anio_fiscal, treatment, ref = 2014)2017                 155951.10                  -40529.86                  -42979.00 
                                                         (176477.61)                 (37482.18)                 (26234.54)
i(anio_fiscal, treatment, ref = 2014)2018              117513942.00               137162912.59               125969072.34 
                                                       (90444086.89)             (136216544.98)             (125124792.74)
i(anio_fiscal, treatment, ref = 2014)2019                5347320.31                   43417.73                    2852.51 
                                                        (5396854.47)                (104469.66)                 (65192.21)
--------------------------------------------------------------------------------------------------------------------------
r.squared                                                      0.01                       0.01                       0.01 
adj.r.squared                                                  0.01                       0.01                       0.01 
sigma                                                  101066883.15               143659702.36               116176664.86 
statistic                                                     25.44                      10.13                      15.62 
p.value                                                        0.00                       0.00                       0.00 
df                                                             8                          8                          8    
logLik                                                   -360436.00                 -147105.71                 -241449.41 
AIC                                                       720892.01                  294231.41                  482918.81 
BIC                                                       720970.08                  294300.35                  482992.81 
deviance                                   185383230379218010122      150100974624688865280      162909000726963421184    
df.residual                                                18149                       7273                      12070    
nobs                                                       18158                       7282                      12079    
==========================================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-9-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>es_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">formula =</span> fml_event_study)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-with-fixed-effects-1" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="event-study-design-with-fixed-effects-1"><span class="header-section-number">2.2</span> Event Study design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-3" role="tab" aria-controls="tabset-10-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
==========================================================================================================================
                                           All firms                  CIT &gt;= Statutory           CIT &gt; 0                  
--------------------------------------------------------------------------------------------------------------------------
anio_fiscal2014                                             4004.65                   94782.29                    1878.26 
                                                           (3377.94)                (107099.87)                  (4726.43)
anio_fiscal2015                                             7906.53                   70039.24                   12170.19 
                                                          (11820.39)                (119723.79)                 (28105.26)
anio_fiscal2016                                             3224.83                   59022.05                    9163.15 
                                                          (18173.25)                (127987.21)                 (38181.75)
anio_fiscal2017                                            98585.55                  147995.93                   87303.74 
                                                          (82603.93)                (226794.36)                (117355.85)
anio_fiscal2018                                            33746.81                   59491.08                  -31639.20 
                                                          (46756.97)                (135050.59)                 (35094.18)
anio_fiscal2019                                           140707.70                  190201.99                   81041.59 
                                                          (81668.61)                (166915.76)                 (62293.39)
i(anio_fiscal, treatment, ref = 2014)2013               -1092897.36               -12495213.02                -4672679.16 
                                                        (2384395.07)              (25529292.26)               (6092055.09)
i(anio_fiscal, treatment, ref = 2014)2015               21888429.91               114967339.36                29224879.58 
                                                       (15680432.48)             (114253867.02)              (21780096.75)
i(anio_fiscal, treatment, ref = 2014)2016               44639013.70                68773655.33                65951937.23 
                                                       (28585184.01)              (69905433.95)              (49805425.79)
i(anio_fiscal, treatment, ref = 2014)2017               58943889.20               160652780.27                76240064.00 
                                                       (49293969.34)             (159501232.19)              (73955327.56)
i(anio_fiscal, treatment, ref = 2014)2018              166510681.14               288030129.41               188224572.89 
                                                      (128292062.83)             (283494373.19)             (185945252.85)
i(anio_fiscal, treatment, ref = 2014)2019               71873592.75               169605224.40                84453275.15 
                                                       (56124381.40)             (168432133.84)              (86309610.38)
--------------------------------------------------------------------------------------------------------------------------
r.squared                                                      0.01                       0.02                       0.01 
adj.r.squared                                                 -0.23                      -0.59                      -0.33 
statistic                                                     16.70                       8.38                       9.60 
p.value                                                        0.00                       0.00                       0.00 
deviance                                   142484603751197376512      111349800814381285386      123472851646149033984    
df.residual                                                14563                       4492                       8946    
nobs                                                       18158                       7282                      12079    
==========================================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-10-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>es_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml_event_study,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_fe,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-unsaturated-model-1" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="event-study-design-assets-weighted-unsaturated-model-1"><span class="header-section-number">2.3</span> Event Study design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-3" role="tab" aria-controls="tabset-11-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-11-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-11-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
============================================================================
                             All firms      CIT &gt;= Statutory  CIT &gt; 0       
----------------------------------------------------------------------------
(Intercept)                  -52310435.26    -35499988.15      -27756248.92 
                             (30757875.58)   (28257938.39)     (18209835.48)
anio_fiscal                      25981.46        17643.24          13793.29 
                                (15269.94)      (14026.75)         (9039.16)
treatment                        -6554.29       -33491.75          -9828.89 
                                (15556.13)      (26303.46)        (21923.30)
anio_fiscal::2013:treatment      16416.55        17643.24            353.79 
                                (18048.21)      (14026.77)        (16257.01)
anio_fiscal::2015:treatment   13001469.90       120014.94       18485110.44 
                             (12032271.83)     (135200.66)     (18227291.07)
anio_fiscal::2016:treatment   27125339.43       152787.25       45778422.66 
                             (26077828.23)     (186579.20)     (45321222.34)
anio_fiscal::2017:treatment     145032.88       -50750.08         -53291.76 
                               (177371.68)      (42135.94)        (30355.49)
anio_fiscal::2018:treatment  114671417.32    127752537.47      118651503.49 
                             (87737094.58)  (126855413.44)    (117847890.92)
anio_fiscal::2019:treatment    5368080.04        36258.30          -4507.61 
                              (5438304.39)     (113973.50)        (73744.18)
----------------------------------------------------------------------------
r.squared                            0.01            0.01              0.01 
adj.r.squared                        0.01            0.01              0.01 
sigma                        382198631.08    538275516.48      438745289.12 
logLik                         -360436.19      -147105.90        -241449.76 
AIC                             720890.38       294229.80         482917.51 
BIC                             720960.64       294291.84         482984.11 
nobs                             18158            7282             12079    
============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-11-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>es_model_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fml =</span> fml_event_study,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-with-fixed-effects-1" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="event-study-design-assets-weighted-with-fixed-effects-1"><span class="header-section-number">2.4</span> Event Study design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-2" role="tab" aria-controls="tabset-12-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-3" role="tab" aria-controls="tabset-12-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-12-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-12-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
=============================================================================
                             All firms       CIT &gt;= Statutory  CIT &gt; 0       
-----------------------------------------------------------------------------
anio_fiscal::2013:treatment    -1151727.69    -11695026.50       -4953029.43 
                               (2334127.30)   (24202111.11)      (6053355.99)
anio_fiscal::2015:treatment    21557601.35    108166638.92       29036834.19 
                              (14927327.40)  (107664984.30)     (20762322.05)
anio_fiscal::2016:treatment    48334328.49     64938103.68       72718333.96 
                              (32082051.32)   (66187495.08)     (56868812.69)
anio_fiscal::2017:treatment    56532103.72    149640044.78       71205505.33 
                              (47085805.50)  (148842030.42)     (68611744.77)
anio_fiscal::2018:treatment   160703853.08    266889430.70      175798954.15 
                             (123290319.84)  (262973508.96)    (173555544.21)
anio_fiscal::2019:treatment    68347802.46    158122939.71       77484891.13 
                              (53258437.46)  (157321615.82)     (79856238.88)
-----------------------------------------------------------------------------
r.squared                             0.24            0.27              0.25 
adj.r.squared                         0.05           -0.19             -0.02 
sigma                         374456334.03    590183258.16      444166160.45 
logLik                          -358046.88      -146018.85        -239776.15 
AIC                              723283.75       297617.69         485818.30 
BIC                              751349.44       316849.61         509000.07 
nobs                              18158            7282             12079    
within.r.squared                      0.01            0.02              0.01 
=============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-12-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  fml_event_study_fe <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  i(anio_fiscal,treatment, ref = 2014) | firm_id + anio_fiscal'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>es_model_aw_fe <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fml =</span> fml_event_study_fe,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw_fe,</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-unsaturated-model-1" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="diff-in-diff-design-unsaturated-model-1"><span class="header-section-number">2.5</span> Diff-in-diff design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-13-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-1" role="tab" aria-controls="tabset-13-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-2" role="tab" aria-controls="tabset-13-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-3" role="tab" aria-controls="tabset-13-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-13-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-13-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-13-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-13-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===================================================================================================
                    All firms                  CIT &gt;= Statutory           CIT &gt; 0                  
---------------------------------------------------------------------------------------------------
(Intercept)                         21535.98                   42899.53                   26071.62 
                                   (15106.02)                 (36760.86)                 (20068.21)
treatment                          -17294.86                  -42899.53                  -19697.39 
                                   (15674.19)                 (36760.86)                 (21024.59)
postPost                            42959.08                   17589.31                   19918.02 
                                   (30844.47)                 (48214.82)                 (26178.34)
treatment:postPost               32220871.14                36697544.76                38198055.04 
                                (20952697.70)              (36507968.41)              (31451869.62)
---------------------------------------------------------------------------------------------------
r.squared                               0.00                       0.00                       0.00 
adj.r.squared                           0.00                       0.00                       0.00 
sigma                           101425880.11               144202492.09               116529406.10 
statistic                              22.95                       6.92                      15.41 
p.value                                 0.00                       0.00                       0.00 
df                                      3                          3                          3    
logLik                            -360502.89                 -147135.67                 -241488.53 
AIC                                721015.78                  294281.34                  482987.05 
BIC                                721054.81                  294315.81                  483024.05 
deviance            186753995024694968320      151341342795245944832      163967662531766321152    
df.residual                         18154                       7278                      12075    
nobs                                18158                       7282                      12079    
===================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-13-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-13-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>did_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">formula =</span> fml)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-with-fixed-effects-1" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="diff-in-diff-design-with-fixed-effects-1"><span class="header-section-number">2.6</span> Diff-in-diff design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-14-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-1" role="tab" aria-controls="tabset-14-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-2" role="tab" aria-controls="tabset-14-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-3" role="tab" aria-controls="tabset-14-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-14-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-14-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-14-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-14-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===================================================================================================
                    All firms                  CIT &gt;= Statutory           CIT &gt; 0                  
---------------------------------------------------------------------------------------------------
postPost                            41036.29                   37919.94                   25051.00 
                                   (32925.55)                 (92609.77)                 (42719.34)
treatment:postPost               62470020.83               165029974.52                82847046.83 
                                (43224022.30)             (162502705.55)              (69497081.85)
---------------------------------------------------------------------------------------------------
r.squared                               0.00                       0.01                       0.00 
adj.r.squared                          -0.24                      -0.60                      -0.34 
statistic                              26.18                      20.30                      19.68 
p.value                                 0.00                       0.00                       0.00 
deviance            143928640104955314186      112823826491096481792      124515177632328368138    
df.residual                         14573                       4502                       8956    
nobs                                18158                       7282                      12079    
===================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-14-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-14-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>did_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-unsaturated-model-1" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-unsaturated-model-1"><span class="header-section-number">2.7</span> Diff-in-diff design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span> <span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-15-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-1" role="tab" aria-controls="tabset-15-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-15-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-2" role="tab" aria-controls="tabset-15-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-15-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-3" role="tab" aria-controls="tabset-15-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-15-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-15-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-15-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-15-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
======================================================================================================
                    All firms                   CIT &gt;= Statutory            CIT &gt; 0                   
------------------------------------------------------------------------------------------------------
(Intercept)                          22528.32                    44025.32                    26851.91 
                                    (15669.91)                  (37752.59)                  (20587.97)
treatment                           -17631.43                   -44025.32                   -19518.65 
                                    (16394.68)                  (37752.59)                  (21809.54)
postPost                             55822.54                    28261.95                    28050.71 
                                    (37482.01)                  (54362.42)                  (30768.15)
treatment:postPost                32308371.94                 34313912.64                 37967898.03 
                                 (20422546.84)               (34136964.44)               (30257820.02)
------------------------------------------------------------------------------------------------------
r.squared                                0.00                        0.00                        0.00 
adj.r.squared                            0.00                        0.00                        0.00 
sigma                            383502604.98                540153725.35                439978521.46 
statistic                               23.55                        6.45                       15.75 
p.value                                  0.00                        0.00                        0.00 
df                                       3                           3                           3    
logLik                             -361149.79                  -147222.90                  -241806.02 
AIC                                 722309.59                   294455.81                   483622.05 
BIC                                 722348.62                   294490.27                   483659.04 
deviance            2669985898621102981220      2123473290109681139882      2337491774556802121868    
df.residual                          18154                        7278                       12075    
nobs                                 18158                        7282                       12079    
======================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-15-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-15-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>did_model_aw <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">formula =</span> fml,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">weights =</span> assets_2014)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-with-fixed-effects-1" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-with-fixed-effects-1"><span class="header-section-number">2.8</span> Diff-in-diff design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-16-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-1" role="tab" aria-controls="tabset-16-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-16-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-2" role="tab" aria-controls="tabset-16-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-16-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-3" role="tab" aria-controls="tabset-16-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-16-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-16-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-16-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-16-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
==================================================================
                    All firms      CIT &gt;= Statutory  CIT &gt; 0      
------------------------------------------------------------------
treatment:postPost   61738660.90    154267622.83      81008927.03 
                    (41523463.38)  (152204679.45)    (65823096.14)
------------------------------------------------------------------
r.squared                   0.23            0.26             0.24 
adj.r.squared               0.04           -0.20            -0.02 
sigma               376045365.25    593153419.00     445578614.07 
logLik                -358132.79      -146063.03       -239823.16 
AIC                    723445.59       297696.06        485902.33 
BIC                    751472.24       316893.51        509047.10 
nobs                    18158            7282            12079    
within.r.squared            0.00            0.01             0.00 
==================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-16-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-16-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>did_model_fe_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fml =</span> fml_fe,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="minor-groups-t-min-vs-c-min" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Minor groups (T-Min vs C-Min)</h1>
<section id="event-study-design-unsaturated-model-2" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="event-study-design-unsaturated-model-2"><span class="header-section-number">3.1</span> Event Study design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-17-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-1" role="tab" aria-controls="tabset-17-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-17-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-2" role="tab" aria-controls="tabset-17-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-17-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-3" role="tab" aria-controls="tabset-17-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-17-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-17-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-17-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-17-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
======================================================================================================================
                                           All firms                  CIT &gt;= Statutory       CIT &gt; 0                  
----------------------------------------------------------------------------------------------------------------------
(Intercept)                                             79465184.15           211486465.13               112044925.42 
                                                       (70478499.57)         (183973299.75)              (97860930.08)
anio_fiscal                                               -39390.38             -104852.70                  -55545.79 
                                                          (34944.84)             (91219.93)                 (48522.02)
treatment                                                -121188.08             -313118.38                 -175714.08 
                                                         (100402.94)            (256436.72)                (137674.00)
i(anio_fiscal, treatment, ref = 2014)2013                 -35822.47             -104852.70                  -36521.32 
                                                          (35129.10)             (91219.93)                 (52085.71)
i(anio_fiscal, treatment, ref = 2014)2015                  33982.16              111126.74                   63626.74 
                                                          (37176.15)             (91433.58)                 (48888.16)
i(anio_fiscal, treatment, ref = 2014)2016               90277326.87              213826.15               124014406.97 
                                                       (89470578.62)            (182465.09)             (122721529.58)
i(anio_fiscal, treatment, ref = 2014)2017                 106408.67              314558.11                  166637.36 
                                                         (105487.54)            (273659.79)                (145566.06)
i(anio_fiscal, treatment, ref = 2014)2018                 149887.09              425163.20                  227611.44 
                                                         (140297.37)            (364902.65)                (194126.48)
i(anio_fiscal, treatment, ref = 2014)2019                 395023.31              923878.74                  569671.71 
                                                         (270528.18)            (602940.13)                (375305.33)
----------------------------------------------------------------------------------------------------------------------
r.squared                                                      0.01                   0.00                       0.01 
adj.r.squared                                                  0.01                  -0.00                       0.01 
sigma                                                  129151901.35             4973229.38               153801533.20 
statistic                                                      6.81                   0.44                       6.60 
p.value                                                        0.00                   0.89                       0.00 
df                                                             8                      8                          8    
logLik                                                   -125330.75              -43842.99                  -88900.21 
AIC                                                       250681.49               87705.99                  177820.41 
BIC                                                       250748.87               87764.64                  177884.28 
deviance                                   103884370436234887178      64182162033828112      103537548133403672586    
df.residual                                                 6228                   2595                       4377    
nobs                                                        6237                   2604                       4386    
======================================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-17-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-17-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>es_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">formula =</span> fml_event_study)</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model,</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-with-fixed-effects-2" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="event-study-design-with-fixed-effects-2"><span class="header-section-number">3.2</span> Event Study design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-18-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-1" role="tab" aria-controls="tabset-18-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-18-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-2" role="tab" aria-controls="tabset-18-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-18-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-3" role="tab" aria-controls="tabset-18-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-18-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-18-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-18-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-18-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
====================================================================================================================
                                           All firms                 CIT &gt;= Statutory       CIT &gt; 0                 
--------------------------------------------------------------------------------------------------------------------
anio_fiscal2014                                         -316845.86            -1218231.15                -462427.94 
                                                        (302087.64)           (1149753.06)               (455974.72)
anio_fiscal2015                                         -308186.60            -1150520.70                -490332.34 
                                                        (304478.21)           (1093690.11)               (467893.85)
anio_fiscal2016                                         -338207.85             -993676.95                -510559.90 
                                                        (307480.54)            (906797.02)               (479889.20)
anio_fiscal2017                                         -402351.13            -1465706.14                -632705.67 
                                                        (354733.82)           (1266916.94)               (550134.54)
anio_fiscal2018                                         -407561.15            -1019424.42                -650175.09 
                                                        (372652.08)            (944340.87)               (573969.14)
anio_fiscal2019                                         -415885.31            -1016347.36                -628645.68 
                                                        (377096.08)            (948427.66)               (584933.69)
i(anio_fiscal, treatment, ref = 2014)2013              -2361217.17            -1318237.30               -2637612.63 
                                                       (2180361.52)           (1154192.66)              (2610118.88)
i(anio_fiscal, treatment, ref = 2014)2015               2041738.11             -114547.48                3479021.45 
                                                       (2129745.68)             (80854.97)              (3648610.82)
i(anio_fiscal, treatment, ref = 2014)2016              93733443.49             -275933.69              131605318.41 
                                                      (92916108.32)            (252443.09)            (130222576.85)
i(anio_fiscal, treatment, ref = 2014)2017              -1205867.65              197272.45               -1201949.19 
                                                       (1901287.01)            (161487.11)              (2719588.45)
i(anio_fiscal, treatment, ref = 2014)2018              -3574221.02             -226270.59               -4597718.94 
                                                       (4058441.36)            (212194.35)              (5592495.38)
i(anio_fiscal, treatment, ref = 2014)2019              -3545563.04              179986.61               -4225191.37 
                                                       (4245892.32)            (430794.79)              (5562375.72)
--------------------------------------------------------------------------------------------------------------------
r.squared                                                     0.01                   0.01                      0.01 
adj.r.squared                                                -0.26                  -0.63                     -0.34 
statistic                                                     3.86                   0.76                      3.55 
p.value                                                       0.00                   0.70                      0.00 
deviance                                   89000459629625229312      47645229189523568      88665661630583029760    
df.residual                                                4917                   1586                      3222    
nobs                                                       6237                   2604                      4386    
====================================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-18-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-18-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>es_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml_event_study,</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_fe,</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-unsaturated-model-2" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="event-study-design-assets-weighted-unsaturated-model-2"><span class="header-section-number">3.3</span> Event Study design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-19-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-1" role="tab" aria-controls="tabset-19-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-19-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-2" role="tab" aria-controls="tabset-19-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-19-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-3" role="tab" aria-controls="tabset-19-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-19-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-19-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-19-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-19-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
============================================================================
                             All firms      CIT &gt;= Statutory  CIT &gt; 0       
----------------------------------------------------------------------------
(Intercept)                   95163734.14    245958472.70      131914199.64 
                             (82939366.54)  (210969533.50)    (113500067.07)
anio_fiscal                     -47171.98      -121940.84         -65395.43 
                                (41122.47)     (104602.55)        (56275.14)
treatment                      -147133.95      -369617.31        -207802.38 
                               (119471.55)     (300088.35)       (162023.66)
anio_fiscal::2013:treatment     -43583.54      -121940.84         -46078.42 
                                (41280.51)     (104602.55)        (59462.62)
anio_fiscal::2015:treatment      40842.49       127570.05          72766.90 
                                (43126.07)     (104752.56)        (56539.56)
anio_fiscal::2016:treatment   96736488.97       248266.53      129284674.57 
                             (95702903.63)     (209231.38)    (127692222.09)
anio_fiscal::2017:treatment     129282.44       365822.53         196186.29 
                               (123966.95)     (313807.64)       (168825.43)
anio_fiscal::2018:treatment     180203.57       492806.76         266363.19 
                               (164958.99)     (418425.61)       (225126.37)
anio_fiscal::2019:treatment     414914.18       963557.27         589353.60 
                               (278649.46)     (629063.63)       (381094.87)
----------------------------------------------------------------------------
r.squared                            0.01            0.00              0.01 
adj.r.squared                        0.01           -0.00              0.01 
sigma                        516160864.31     19904154.95      614709395.36 
logLik                         -125330.89       -43843.08         -88900.26 
AIC                             250679.78        87704.16         177818.51 
BIC                             250740.42        87756.94         177875.99 
nobs                              6237            2604              4386    
============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-19-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-19-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>es_model_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fml =</span> fml_event_study,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-with-fixed-effects-2" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="event-study-design-assets-weighted-with-fixed-effects-2"><span class="header-section-number">3.4</span> Event Study design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-20-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-1" role="tab" aria-controls="tabset-20-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-20-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-2" role="tab" aria-controls="tabset-20-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-20-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-3" role="tab" aria-controls="tabset-20-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-20-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-20-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-20-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-20-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
============================================================================
                             All firms      CIT &gt;= Statutory  CIT &gt; 0       
----------------------------------------------------------------------------
anio_fiscal::2013:treatment   -2335238.10   -1494033.75         -2669650.23 
                              (2106803.88)  (1317448.03)        (2599533.04)
anio_fiscal::2015:treatment    2147824.62    -127030.38          3731088.89 
                              (2232792.96)    (90137.72)        (3910236.25)
anio_fiscal::2016:treatment  100369909.99    -304539.84        137075813.11 
                             (99331234.88)   (289255.06)      (135379431.13)
anio_fiscal::2017:treatment    -921851.05     226311.32          -853120.02 
                              (1768690.22)   (172659.16)        (2577191.67)
anio_fiscal::2018:treatment   -3183054.09    -260984.76         -3905303.77 
                              (3753074.63)   (249646.44)        (5038190.86)
anio_fiscal::2019:treatment   -3096429.96      98697.93         -3790254.30 
                              (3864446.38)   (409272.80)        (5209025.96)
----------------------------------------------------------------------------
r.squared                            0.15          0.26                0.15 
adj.r.squared                       -0.08         -0.22               -0.15 
sigma                        537688562.65   21924129.17        663018293.28 
logLik                         -124848.65     -43455.24           -88560.20 
AIC                             252337.29      88946.47           179448.40 
BIC                             261231.79      94916.84           186881.91 
nobs                              6237          2604                4386    
within.r.squared                     0.01          0.00                0.01 
============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-20-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-20-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  fml_event_study_fe <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  i(anio_fiscal,treatment, ref = 2014) | firm_id + anio_fiscal'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>es_model_aw_fe <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fml =</span> fml_event_study_fe,</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw_fe,</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-unsaturated-model-2" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="diff-in-diff-design-unsaturated-model-2"><span class="header-section-number">3.5</span> Diff-in-diff design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-21-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-1" role="tab" aria-controls="tabset-21-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-21-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-2" role="tab" aria-controls="tabset-21-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-21-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-3" role="tab" aria-controls="tabset-21-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-21-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-21-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-21-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-21-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===============================================================================================
                    All firms                  CIT &gt;= Statutory       CIT &gt; 0                  
-----------------------------------------------------------------------------------------------
(Intercept)                        173971.82              429613.20                  232181.86 
                                  (138465.89)            (359415.94)                (185856.06)
treatment                         -160459.36             -429613.20                 -222893.45 
                                  (139117.93)            (359415.94)                (186088.21)
postPost                          -150245.48             -410205.70                 -212072.59 
                                  (137068.90)            (359483.32)                (183630.19)
treatment:postPost               19544023.95              474235.00                26226137.93 
                                (19185401.61)            (364656.52)              (25674264.30)
-----------------------------------------------------------------------------------------------
r.squared                               0.00                   0.00                       0.00 
adj.r.squared                           0.00                   0.00                       0.00 
sigma                           129551484.30             4968598.27               154458754.63 
statistic                               3.61                   1.13                       3.39 
p.value                                 0.01                   0.33                       0.02 
df                                      3                      3                          3    
logLik                            -125352.52              -43843.07                  -88921.41 
AIC                                250715.03               87696.15                  177852.83 
BIC                                250748.72               87725.47                  177884.76 
deviance            104612098304254640138      64186118921633200      104543595161465536512    
df.residual                          6233                   2600                       4382    
nobs                                 6237                   2604                       4386    
===============================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-21-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-21-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>did_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">formula =</span> fml)</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-with-fixed-effects-2" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="diff-in-diff-design-with-fixed-effects-2"><span class="header-section-number">3.6</span> Diff-in-diff design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-22-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-1" role="tab" aria-controls="tabset-22-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-22-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-2" role="tab" aria-controls="tabset-22-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-22-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-3" role="tab" aria-controls="tabset-22-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-22-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-22-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-22-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-22-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
=============================================================================================
                    All firms                 CIT &gt;= Statutory       CIT &gt; 0                 
---------------------------------------------------------------------------------------------
postPost                         -181987.63             -470775.83                -293414.34 
                                 (165447.58)            (417181.78)               (255410.23)
treatment:postPost              21803663.07              534084.44               28832226.17 
                               (21289269.30)            (421651.62)             (28041191.88)
---------------------------------------------------------------------------------------------
r.squared                              0.00                   0.00                      0.00 
adj.r.squared                         -0.26                  -0.63                     -0.36 
statistic                              1.75                   1.12                      1.52 
p.value                                0.17                   0.33                      0.22 
deviance            89774379167482691584      47850687850606320      89753408022726377472    
df.residual                         4927                   1596                      3232    
nobs                                6237                   2604                      4386    
=============================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-22-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-22-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>did_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml,</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-unsaturated-model-2" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-unsaturated-model-2"><span class="header-section-number">3.7</span> Diff-in-diff design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span> <span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-23-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-1" role="tab" aria-controls="tabset-23-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-23-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-2" role="tab" aria-controls="tabset-23-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-23-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-3" role="tab" aria-controls="tabset-23-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-23-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-23-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-23-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-23-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===================================================================================================
                    All firms                   CIT &gt;= Statutory         CIT &gt; 0                   
---------------------------------------------------------------------------------------------------
(Intercept)                         208276.65                511250.33                   275405.74 
                                   (165229.86)              (424844.05)                 (219603.87)
treatment                          -194276.20               -511250.33                  -265957.58 
                                   (165816.54)              (424844.05)                 (219807.21)
postPost                           -180952.01               -489891.47                  -253189.17 
                                   (163617.51)              (424928.27)                 (217050.98)
treatment:postPost                20781193.77                547128.59                 27316114.83 
                                 (20365392.11)              (428434.24)               (26695808.37)
---------------------------------------------------------------------------------------------------
r.squared                                0.00                     0.00                        0.00 
adj.r.squared                            0.00                     0.00                        0.00 
sigma                            517893292.12              19885067.95                617466939.66 
statistic                                3.80                     1.40                        3.48 
p.value                                  0.01                     0.24                        0.02 
df                                       3                        3                           3    
logLik                             -125862.95                -44014.62                   -89242.39 
AIC                                 251735.90                 88039.25                   178494.79 
BIC                                 251769.59                 88068.57                   178526.72 
deviance            1671774508798986682408      1028081410782402816      1670705077334280241222    
df.residual                           6233                     2600                        4382    
nobs                                  6237                     2604                        4386    
===================================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-23-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-23-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>did_model_aw <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">formula =</span> fml,</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">weights =</span> assets_2014)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-with-fixed-effects-2" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-with-fixed-effects-2"><span class="header-section-number">3.8</span> Diff-in-diff design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Change from t-1 entrances to tax haven (MID codes 1-9) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Change from t-1 entrances to tax haven (MID codes 1-9) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-24-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-1" role="tab" aria-controls="tabset-24-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-24-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-2" role="tab" aria-controls="tabset-24-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-24-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-3" role="tab" aria-controls="tabset-24-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-24-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-24-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-24-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-24-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
==================================================================
                    All firms      CIT &gt;= Statutory  CIT &gt; 0      
------------------------------------------------------------------
treatment:postPost   24291426.44     648934.84        31422472.07 
                    (23681161.24)   (530204.54)      (30502691.57)
------------------------------------------------------------------
r.squared                   0.14          0.26               0.15 
adj.r.squared              -0.08         -0.21              -0.16 
sigma               539588901.06   21899204.41       666086041.81 
logLik                -124872.44     -43456.14          -88583.31 
AIC                    252374.88      88938.29          179484.62 
BIC                    261235.69      94879.33          186886.20 
nobs                     6237          2604               4386    
within.r.squared            0.00          0.00               0.00 
==================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-24-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-24-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>did_model_fe_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fml =</span> fml_fe,</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>